sum
defmodule Hw.Primes do
  defp prime(n) when n < 2, do: false

  defp prime(2), do: true

  defp prime(n) when n > 2 do
    2..trunc(:math.sqrt(n))
    |> Enum.all?(&(rem(n, &1) != 0))
  end

  defp prime(_), do: false

  def sum_primes(limit) do
    Enum.sum(for n <- 2..limit, prime(n), do: n)
  end

  def make_threads(limit, threads) do

  end

  def sum_primes_parallel(limit, threads) do



  end


end



defmodule Hw.Primes do
  def total_sum(ranges) do
    ranges
    |> Enum.map(&Task.async(fn -> range_sum(&1) end))
    |> Enum.map(&Task.await(&1))
    |> Enum.sum()
  end

  def range_sum({start, finish}) do
    start..finish
    |> Enum.filter(&is_prime/1)
    |> Enum.sum()
  end

  defp is_prime(num) when num < 2, do: false
  defp is_prime(2), do: true
  defp is_prime(num) do
    factors = Enum.filter(2..(num - 1), fn x -> rem(num, x) == 0 end)
    Enum.empty?(factors)
  end
end

IO.inspect(Hw.Primes.total_sum([{100, 200}, {201, 300}, {301, 400}, {401, 500}])) # Output: 2944 (sum of prime numbers within the specified ranges)
IO.inspect(Hw.Primes.total_sum([{1, 10}]))       # Output: 17 (sum of prime numbers from 1 to 10)
IO.inspect(Hw.Primes.total_sum([{1, 100}]))      # Output: 1060 (sum of prime numbers from 1 to 100)
IO.inspect(Hw.Primes.total_sum([{1, 1000}]))     # Output: 76127 (sum of prime numbers from 1 to 1000)
IO.inspect(Hw.Primes.total_sum([{1, 10000}]))    # Output: 5736396 (sum of prime numbers from 1 to 10000)
IO.inspect(Hw.Primes.total_sum([{100, 500}]))    # Output: 20476 (sum of prime numbers from 100 to 500)
